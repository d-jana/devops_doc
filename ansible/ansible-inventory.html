<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=qROakT6DUqKEEW1PTOnlUS39sXJ9Qvkhjh4u5FeT75eClnAXoAF10-hpQytZijFgWXpCAKgnHhJESNsfMyqz8EcSNIwWK2wFEXxM5HQKvmf3rGVtsTkPsbDajuO5ueQw');ol{margin:0;padding:0}table td,table th{padding:0}.c1{background-color:#ffffff;color:#404040;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Inconsolata";font-style:normal}.c27{color:#404040;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Helvetica Neue";font-style:normal}.c6{color:#008080;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Inconsolata";font-style:normal}.c20{color:#404040;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Helvetica Neue";font-style:normal}.c0{color:#404040;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Helvetica Neue";font-style:normal}.c8{padding-top:10pt;padding-bottom:6pt;line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c29{color:#404040;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Inconsolata";font-style:normal}.c26{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:"Courier";font-style:normal}.c28{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Liberation Serif";font-style:normal}.c17{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Liberation Serif";font-style:italic}.c31{color:#404040;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Helvetica Neue";font-style:italic}.c13{color:#c9211e;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Helvetica Neue";font-style:normal}.c16{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Liberation Mono";font-style:normal}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Liberation Serif";font-style:normal}.c25{color:#202124;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c14{color:#e74c3c;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Inconsolata";font-style:normal}.c15{color:#2980b9;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Helvetica Neue";font-style:normal}.c12{padding-top:0pt;padding-bottom:9pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c7{padding-top:0pt;padding-bottom:18pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c24{color:#404040;font-weight:400;text-decoration:none;font-size:18pt;font-family:"Roboto Slab";font-style:normal}.c19{padding-top:0pt;padding-bottom:18pt;line-height:1.1500000000000001;orphans:2;widows:2;text-align:left}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c21{padding-top:0pt;padding-bottom:7pt;line-height:1.1500000000000001;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c11{font-size:12pt;font-family:"Arial";font-style:normal;color:#202124;font-weight:400}.c32{font-family:"Arial";font-style:normal;color:#202124}.c5{max-width:481.9pt;padding:56.7pt 56.7pt 56.7pt 56.7pt}.c30{font-size:18pt;font-weight:700}.c23{color:inherit;text-decoration:inherit}.c2{background-color:#ffffff}.c22{margin-left:46.4pt}.c10{height:12pt}.c18{margin-left:28.4pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:12pt;font-family:"Liberation Serif"}p{margin:0;color:#000000;font-size:12pt;font-family:"Liberation Serif"}h1{padding-top:24pt;color:#000000;font-weight:700;font-size:24pt;padding-bottom:6pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:10pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:6pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Liberation Serif";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c2 c5"><p class="c9"><span class="c30">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ANSIBLE INVENTORY</span></p><p class="c9 c10"><span class="c28"></span></p><p class="c9"><span class="c11">The Ansible inventory</span><span class="c30 c32">&nbsp;</span><span class="c11">file defines the hosts and groups of hosts upon which commands, modules, and tasks in a playbook operate</span></p><p class="c9 c10"><span class="c25"></span></p><h2 class="c8"><span class="c24"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/intro_inventory.html%23id6&amp;sa=D&amp;source=editors&amp;ust=1617736288623000&amp;usg=AOvVaw2bCn5d7-Q5tfoOOFXVL86B">Hosts and Groups</a></span></h2><p class="c19"><span class="c0">The format for&nbsp;</span><span class="c14 c2">/etc/ansible/hosts</span><span class="c0">&nbsp;is an INI-like format and looks like this:</span></p><p class="c4"><span class="c1">//.... this are hosts</span></p><p class="c4"><span class="c1">one.example.com &nbsp;</span></p><p class="c4"><span class="c1">two.example.com &nbsp;</span></p><p class="c4 c10"><span class="c1"></span></p><p class="c4"><span class="c1">//... this are group of hosts</span></p><p class="c4"><span class="c1">[webservers] &nbsp; &nbsp;//.... this is group name</span></p><p class="c4"><span class="c1">one.example.com</span></p><p class="c4"><span class="c1">two.example.com</span></p><p class="c4 c10"><span class="c16"></span></p><p class="c4"><span class="c1">[dbservers] &nbsp; //... this is group name</span></p><p class="c4"><span class="c1">one.example.com</span></p><p class="c4"><span class="c1">two.example.com</span></p><p class="c4"><span class="c1">three.example.com</span></p><p class="c9 c10"><span class="c25"></span></p><p class="c9"><span class="c11">By default ssh port is 22. If you have hosts that run on non-standard SSH ports you can put the port number after the hostname with a colon.</span></p><p class="c9 c10"><span class="c3"></span></p><p class="c9"><span class="c29">one.example.com:5309</span></p><p class="c9 c10"><span class="c3"></span></p><p class="c21"><span class="c0">Suppose you have just static IPs and want to set up some aliases that live in your host file, or you are connecting through tunnels. You can also describe hosts like this:</span></p><p class="c4"><span class="c1">jumper ansible_port=5555 ansible_host=192.0.2.50</span></p><p class="c19"><span class="c0">In the above example, trying to ansible against the host alias &ldquo;jumper&rdquo; (which may not even be a real hostname) will contact 192.0.2.50 on port 5555</span></p><p class="c21"><span class="c0">If you have a lot of hosts following similar patterns you can do this rather than listing each hostname:</span></p><p class="c4"><span class="c1">[</span><span class="c6 c2">webservers</span><span class="c1">]</span></p><p class="c4"><span class="c1">www[01:50].example.com</span></p><p class="c9 c10"><span class="c3"></span></p><p class="c21"><span class="c0">You can also define alphabetic ranges:</span></p><p class="c4"><span class="c1">[</span><span class="c6 c2">databases</span><span class="c1">]</span></p><p class="c4"><span class="c1">db-[a:f].example.com</span></p><p class="c9 c10"><span class="c3"></span></p><p class="c9 c10"><span class="c3"></span></p><h2 class="c8"><span class="c24"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/intro_inventory.html%23id7&amp;sa=D&amp;source=editors&amp;ust=1617736288626000&amp;usg=AOvVaw0vnpx7hLadcEuYGh69DXoy">Host Variables</a></span></h2><p class="c19"><span class="c0">it is easy to assign variables to hosts that will be used later in playbooks:</span></p><p class="c4"><span class="c1">[</span><span class="c6 c2">atlanta</span><span class="c1">]</span></p><p class="c4"><span class="c1">host1 http_port=80 maxRequestsPerChild=808</span></p><p class="c4"><span class="c1">host2 http_port=303 maxRequestsPerChild=909</span></p><p class="c9 c10"><span class="c3"></span></p><h2 class="c8"><span class="c24"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/intro_inventory.html%23id8&amp;sa=D&amp;source=editors&amp;ust=1617736288627000&amp;usg=AOvVaw2RylmMV7P14n44QiWGukDn">Group Variables</a></span></h2><p class="c19"><span class="c0">Variables can also be applied to an entire group at once:</span></p><p class="c4"><span class="c1">[</span><span class="c6 c2">atlanta</span><span class="c1">]</span></p><p class="c4"><span class="c1">host1</span></p><p class="c4"><span class="c1">host2</span></p><p class="c4"><span class="c16">//... </span><span class="c27">you can apply variables to group using</span><span class="c14 c2">:vars</span></p><p class="c4"><span class="c1">[atlanta:vars]</span></p><p class="c4"><span class="c1">ntp_server=ntp.atlanta.example.com</span></p><p class="c4"><span class="c1">proxy=proxy.atlanta.example.com</span></p><p class="c9 c10"><span class="c3"></span></p><h2 class="c8"><span class="c24"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/intro_inventory.html%23id9&amp;sa=D&amp;source=editors&amp;ust=1617736288628000&amp;usg=AOvVaw1wh2hKKx6K1eKeYiWfW_fC">Groups of Groups</a></span></h2><p class="c19"><span class="c0">It is also possible to make groups of groups using the&nbsp;</span><span class="c14 c2">:children</span><span class="c0">&nbsp;suffix.</span></p><p class="c4"><span class="c1">[</span><span class="c2 c6">atlanta</span><span class="c1">]</span></p><p class="c4"><span class="c1">host1</span></p><p class="c4"><span class="c1">host2</span></p><p class="c4 c10"><span class="c16"></span></p><p class="c4"><span class="c1">[raleigh]</span></p><p class="c4"><span class="c1">host2</span></p><p class="c4"><span class="c1">host3</span></p><p class="c4 c10"><span class="c16"></span></p><p class="c4"><span class="c1">[southeast:children]</span></p><p class="c4"><span class="c1">atlanta</span></p><p class="c4"><span class="c1">raleigh</span></p><p class="c4 c10"><span class="c16"></span></p><p class="c4"><span class="c1">[usa:children]</span></p><p class="c4"><span class="c1">southeast</span></p><p class="c4"><span class="c1">northeast</span></p><p class="c4"><span class="c1">southwest</span></p><p class="c4"><span class="c1">northwest</span></p><p class="c9 c10"><span class="c3"></span></p><h2 class="c8"><span class="c24"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/intro_inventory.html%23id10&amp;sa=D&amp;source=editors&amp;ust=1617736288630000&amp;usg=AOvVaw3EOJEvLaP2Oytwmf1ahrCe">Default groups</a></span></h2><p class="c19"><span class="c0">There are two default groups:&nbsp;</span><span class="c14 c2">all</span><span class="c0">&nbsp;and&nbsp;</span><span class="c14 c2">ungrouped</span><span class="c0">.&nbsp;</span><span class="c14 c2">all</span><span class="c0">&nbsp;contains every host.&nbsp;</span><span class="c14 c2">ungrouped</span><span class="c0">&nbsp;contains all hosts that don&rsquo;t have another group aside from&nbsp;</span><span class="c14 c2">all</span><span class="c0">.</span></p><h2 class="c8"><span class="c24"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/intro_inventory.html%23id12&amp;sa=D&amp;source=editors&amp;ust=1617736288630000&amp;usg=AOvVaw22xg-bN5Hp-q5yk0UHqwVU">List of Behavioral Inventory Parameters</a></span></h2><p class="c9"><span class="c0">setting the following variables controls how ansible interacts with remote hosts.</span></p><p class="c9 c10"><span class="c0"></span></p><p class="c12"><span class="c20">ansible_connection</span></p><p class="c12 c22"><span class="c0">Connection type to the host. This can be the name of any of ansible&rsquo;s connection plugins. SSH protocol types are&nbsp;</span><span class="c2 c14">smart</span><span class="c0">,&nbsp;</span><span class="c14 c2">ssh</span><span class="c0">&nbsp;or&nbsp;</span><span class="c14 c2">paramiko</span><span class="c0">. The default is smart. Non-SSH based types are </span><span class="c13">local</span><span class="c0">, </span><span class="c13">docker</span></p><p class="c9 c10"><span class="c0"></span></p><p class="c21"><span class="c0">SSH connection:</span></p><p class="c7"><span class="c20">ansible_host</span></p><p class="c12 c22"><span class="c0">The name of the host to connect to, if different from the alias you wish to give to it.</span></p><p class="c7"><span class="c20">ansible_port</span></p><p class="c12 c22"><span class="c0">The ssh port number, if not 22</span></p><p class="c7"><span class="c20">ansible_user</span></p><p class="c12 c22"><span class="c0">The default ssh user name to use.</span></p><p class="c7"><span class="c20">ansible_ssh_pass</span></p><p class="c12 c22"><span class="c0">The ssh password to use (never store this variable in plain text; always use a vault. See&nbsp;</span><span class="c15"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/playbooks_best_practices.html%23best-practices-for-variables-and-vaults&amp;sa=D&amp;source=editors&amp;ust=1617736288632000&amp;usg=AOvVaw0M54cFnoRG0rgBVfTRar65">Variables and Vaults</a></span><span class="c0">)</span></p><p class="c7"><span class="c20">ansible_ssh_private_key_file</span></p><p class="c12 c22"><span class="c0">Private key file used by ssh.</span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c9 c10"><span class="c0"></span></p><p class="c21"><span class="c0">Privilege escalation (see&nbsp;</span><span class="c15"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/become.html&amp;sa=D&amp;source=editors&amp;ust=1617736288633000&amp;usg=AOvVaw3XeyK0Phf-inIFPRA7NVbr">Ansible Privilege Escalation</a></span><span class="c0">&nbsp;for further details):</span></p><p class="c7"><span class="c20">ansible_become</span></p><p class="c12 c22"><span class="c0">equivalent of the become directive, decides if privilege escalation is used or not.</span></p><p class="c12"><span class="c20">ansible_become_method</span><span class="c31">&nbsp;</span></p><p class="c9 c18"><span class="c0">Allows to set privilege escalation method. Like </span><span class="c17">sudo</span><span class="c3">, </span><span class="c17">su</span><span class="c3">, </span><span class="c17">pfexec</span><span class="c3">, </span><span class="c17">doas</span><span class="c3">, </span><span class="c17">pbrun</span><span class="c3">, </span><span class="c17">dzdo</span><span class="c3">, </span><span class="c17">ksu</span><span class="c3">, </span><span class="c17">runas</span><span class="c3">, </span><span class="c17">machinectl</span><span class="c3">&nbsp;and others</span></p><p class="c9 c10 c18"><span class="c0"></span></p><p class="c7"><span class="c20">ansible_become_user</span></p><p class="c12 c22"><span class="c0">allows to set the user you become through privilege escalation, </span></p><p class="c7"><span class="c20">ansible_become_pass</span></p><p class="c12 c22"><span class="c0">&nbsp;allows you to set the privilege escalation password (never store this variable in plain text; always use a vault. See&nbsp;</span><span class="c15"><a class="c23" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/2.3/playbooks_best_practices.html%23best-practices-for-variables-and-vaults&amp;sa=D&amp;source=editors&amp;ust=1617736288635000&amp;usg=AOvVaw0zyIaF3jPnAryIM6ityTqQ">Variables and Vaults</a></span><span class="c0">)</span></p><p class="c9 c10"><span class="c0"></span></p><p class="c21"><span class="c0">For example, if you want to run all tasks as&nbsp;</span><span class="c14 c2">root</span><span class="c0">&nbsp;on a server named&nbsp;</span><span class="c14 c2">webserver</span><span class="c0">, but you can only connect as the&nbsp;</span><span class="c14 c2">manager</span><span class="c0">&nbsp;user, you could use an inventory entry like this:</span></p><p class="c4"><span class="c1">webserver ansible_user=manager ansible_become=true</span></p><p class="c9 c10"><span class="c0"></span></p><p class="c21"><span class="c0">Examples from a host file:</span></p><p class="c21"><span class="c20">single host</span><span class="c0">&nbsp;-</span></p><p class="c4"><span class="c1">aws_host &nbsp;ansible_user=manager ansible_ssh_private_key_file=/home/example/.ssh/aws.pem</span></p><p class="c4"><span class="c20 c2">group of host</span><span class="c0 c2">&nbsp;-</span></p><p class="c4"><span class="c1">[</span><span class="c6 c2">atlanta</span><span class="c1">]</span></p><p class="c4"><span class="c1">host1</span></p><p class="c4"><span class="c1">host2</span></p><p class="c4 c10"><span class="c14 c2"></span></p><p class="c4"><span class="c1">[atlanta:vars]</span></p><p class="c4"><span class="c1">ansible_user=manager </span></p><p class="c4"><span class="c1">ansible_ssh_private_key_file=/home/example/.ssh/aws.pem</span></p><p class="c4 c10"><span class="c1"></span></p><p class="c4 c10"><span class="c1"></span></p><p class="c4"><span class="c26 c2">---------------Check server status with inventory--------------------</span></p><p class="c9 c2"><span class="c26">ansible &lt;server_name&gt; -m ping -i &lt;inventory file name&gt;</span></p><p class="c2 c9"><span class="c26">--- server_name = all //..ping all server from inventory file</span></p><p class="c9 c2"><span class="c26">--- server_name = name of server //..ping perticular server</span></p><p class="c9 c2"><span class="c26">--- server_name = server group name //.. ping all server under this group</span></p><p class="c4 c10"><span class="c1"></span></p></body></html>
